buildscript {
    ext.kotlin_version = '1.3.50'
    ext.jvm_target = '12'
    ext.junit_version = '5.2.0'
    ext.log4j2_version = '2.11.1'

    repositories {
        jcenter()
    }
    dependencies {
        classpath group: 'org.jetbrains.kotlin', name: 'kotlin-gradle-plugin', version: kotlin_version
    }
}

apply plugin: 'kotlin'

allprojects {
    apply plugin: 'kotlin'

    group 'net.cydhra'
    version '0.1.0'

    repositories {
        jcenter()
        maven { url 'https://dl.bintray.com/kotlin/exposed/' }
    }

    compileKotlin {
        kotlinOptions.jvmTarget = jvm_target
    }

    compileTestKotlin {
        kotlinOptions.jvmTarget = jvm_target
    }
}

project("acromantula_backend") {
    dependencies {
        // kotlin
        implementation group: 'org.jetbrains.kotlin', name: 'kotlin-stdlib-jdk8'
        implementation group: 'org.jetbrains.kotlinx', name: 'kotlinx-coroutines-core', version: '1.3.2'

        // database
        implementation group: 'org.jetbrains.exposed', name: 'exposed', version: '0.17.6'

        // IPC
        implementation group: 'org.scala-sbt.ipcsocket', name: 'ipcsocket', version: '1.0.0'

        // utility
        implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.9'
        implementation group: 'org.apache.logging.log4j', name: 'log4j-api', version: log4j2_version
        implementation group: 'org.apache.logging.log4j', name: 'log4j-core', version: log4j2_version
        implementation group: 'org.apache.logging.log4j', name: 'log4j-slf4j-impl', version: log4j2_version

        // testing framework
        testCompile group: 'org.assertj', name: 'assertj-core', version: '3.11.1'
        testCompile group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: junit_version
        testCompile group: 'org.junit.jupiter', name: 'junit-jupiter-params', version: junit_version
        testRuntime group: 'org.junit.jupiter', name: 'junit-jupiter-engine', version: junit_version
    }
}
